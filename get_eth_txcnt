import requests
from datetime import datetime

# Etherscan APIキーとウォレットアドレスを設定
api_key = 'YOUR_ETHERSCAN_API_KEY'
wallet_address = 'YOUR_WALLET_ADDRESS'

# 指定した期間
start_date = '2023-01-01'
end_date = '2023-02-01'

# タイムスタンプ形式に変換
start_timestamp = int(datetime.strptime(start_date, '%Y-%m-%d').timestamp())
end_timestamp = int(datetime.strptime(end_date, '%Y-%m-%d').timestamp())

def get_transactions(wallet_address, start_timestamp, end_timestamp, api_key):
    url = f'https://api.etherscan.io/api?module=account&action=txlist&address={wallet_address}&startblock=0&endblock=99999999&sort=asc&apikey={api_key}'
    response = requests.get(url)
    transactions = response.json().get('result', [])

    filtered_transactions = [
        tx for tx in transactions if start_timestamp <= int(tx['timeStamp']) <= end_timestamp
    ]
    
    return len(filtered_transactions)

transaction_count = get_transactions(wallet_address, start_timestamp, end_timestamp, api_key)
print(f'Transactions from {start_date} to {end_date}: {transaction_count}')
